!function(){var i=window.location.href.split("?")[0],r=new FormValidation,o=new FormValidation;function l(e){for(var t=[],n=0;n<e.length;n++)t.push(function(e,t,n){if(n){var o=n.split(e);return o[1]?o[1].split(t)[0].trim(" "):n.trim(" ")}return""}("[img]","[/img]",e[n]));return t}function d(e){for(var t=[],n=0;n<e.length;n++)e[n]&&t.push(e[n].trim(" "));return t}function m(e,t,n){var o=document.createElement("div");o.setAttribute("class",t),o.innerHTML=n;var r=document.getElementById(e);r.childNodes[0]&&r.removeChild(r.childNodes[0]),r.style.display="block",r.appendChild(o)}function a(e){return!(0<document.getElementById(e).value.trim().length)}function e(e){if(document.getElementById(e).reset(),"form-source"===e){document.getElementById("result-form-source").style.display="none",document.getElementById("result-form-gen").style.display="none",document.getElementById("msg").style.display="none";var t=document.querySelectorAll(".validate-error"),n=t.length;if("none"===document.getElementById("error-content-link").style.display)for(var o=0;o<n;o++)t[o].classList.remove("validate-error");else for(o=0;o<n-1;o++)t[o].classList.remove("validate-error")}"form-link"===e&&(document.getElementById("result-form-link").style.display="none",document.getElementById("msg-link").style.display="none",document.getElementById("error-content-link").classList.remove("validate-error"))}r.rules({"content-cover":{required:!0,message:"Link for image cover is required!",regex:/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,4}\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)/,errorPlace:"error-content-cover",errorAddClass:{"error-content-cover":"validate-error"}},"content-title":{required:!0,message:"Title must be min 3-250 chars!",minLength:3,maxLength:250,errorPlace:"error-content-title",errorAddClass:{"error-content-title":"validate-error"}},"content-chapter":{required:!1,message:"Chapter must be a positive number!",regex:/^[0-9]/,errorPlace:"error-content-chapter",errorAddClass:{"error-content-chapter":"validate-error"}},"content-per-page":{required:!1,message:"Item per page must be a positive number!",regex:/^[0-9]/,errorPlace:"error-content-per-page",errorAddClass:{"error-content-per-page":"validate-error"}},"content-backlink":{required:!1,message:"Wrong format link!",regex:/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,4}\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)/,errorPlace:"error-content-backlink",errorAddClass:{"error-content-backlink":"validate-error"}},"content-download":{required:!1,message:"Wrong format link!",regex:/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,4}\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)/,errorPlace:"error-content-download",errorAddClass:{"error-content-download":"validate-error"}},"content-images":{required:!0,message:"Images data is required!",errorPlace:"error-content-images",errorAddClass:{"error-content-images":"validate-error","content-images":"line-number-danger"}}}),o.rules({"content-link":{required:!0,message:"Link of your json source is required!",regex:/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,4}\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)/,errorPlace:"error-content-link",errorAddClass:{"error-content-link":"validate-error"}}}),document.getElementById("content-images").addEventListener("change",function(){for(var e=document.getElementById("content-images").value.trim().split(/\n/),e=[].concat(l(d(e))),t="",n=0;n<e.length;n++)t+=e[n]+"\n";document.getElementById("content-images").value=t}),document.getElementById("git-login").addEventListener("click",function(){gitLogin()}),document.getElementById("git-logout").addEventListener("click",function(){gitLogout()}),document.getElementById("generate").addEventListener("click",function(){var l,c,e,t,n,o;document.getElementById("result-form-gen").style.display="none",document.getElementById("result-form-source").style.display="none",r.validate().isValid()?(l={},a("content-cover")||(l.cover=document.getElementById("content-cover").value.trim()),a("content-title")||(l.title=document.getElementById("content-title").value.trim()),a("content-origin-title")||(l.original=document.getElementById("content-origin-title").value.trim()),a("content-genre")||(l.genre=document.getElementById("content-genre").value.trim()),a("content-author")||(l.author=document.getElementById("content-author").value.trim()),a("content-chapter")||(l.chapter=document.getElementById("content-chapter").value.trim()),a("content-release")||(l.release_date=document.getElementById("content-release").value.trim()),a("content-isbn")||(l.isbn=document.getElementById("content-isbn").value.trim()),a("content-publisher")||(l.publisher=document.getElementById("content-publisher").value.trim()),a("content-translator")||(l.translator=document.getElementById("content-translator").value.trim()),a("content-language")||(l.language=document.getElementById("content-language").value.trim()),a("content-status")||(l.status=document.getElementById("content-status").value.trim()),a("content-per-page")||(l.item_per_page=document.getElementById("content-per-page").value.trim()),a("content-backlink")||(l.backlink=document.getElementById("content-backlink").value.trim()),a("content-download")||(l.download=document.getElementById("content-download").value.trim()),a("content-description")||(l.description=document.getElementById("content-description").value.trim()),document.getElementById("content-comment").checked&&(l.use_comment=!1),c="",document.getElementById("mode-single-gen").checked&&(c="&style=single"),document.getElementById("content-cdnify").checked?a("content-images")||(e=l.cover,l.images=document.getElementById("content-images").value.trim().split(/\n/),l.images.push(e),l.images=[].concat(d(l.images)),m("msg","msg","<b>Processing images...</b>"),cdnify(l.images,function(e,t){var n,o,r;e?(console.log(e),l.images.splice(l.images.length-1,1),n=JSON.stringify(l,null,2),(r={})[o=Crypto.encode(document.getElementById("content-title").value)+".json"]={content:n},createGist(o,{description:document.getElementById("content-title").value,files:r},function(e,t){var n;e?m("msg","msg-error","<b>Failed Upload to Gist!</b><br>Error: "+e):(m("msg","msg","<b>Failed to CDNify but Upload to Gist Success!</b>"),n=encodeURIComponent(TextObfuscator.encode(Crypto.encode(t),3)),document.getElementById("result-link-gen").value=i+"view/?content="+n+c,document.getElementById("result-embed-genlight").value='<iframe src="'+i+"embed/light.html?content="+n+c+'" width="100%" height="600px" frameborder="0" scrolling="yes" allowfullscreen="true"></iframe>',document.getElementById("result-embed-gendark").value='<iframe src="'+i+"embed/?content="+n+c+'" width="100%" height="600px" frameborder="0" scrolling="yes" allowfullscreen="true"></iframe>',document.getElementById("result-form-gen").style.display="block")})):(l.cover=t[t.length-1],t.splice(t.length-1,1),l.images=[].concat(t),n=JSON.stringify(l,null,2),(r={})[o=Crypto.encode(document.getElementById("content-title").value)+".json"]={content:n},createGist(o,{description:document.getElementById("content-title").value,files:r},function(e,t){var n;e?m("msg","msg-error","<b>Failed Upload to Gist!</b><br>Error: "+e):(m("msg","msg","<b>Upload to Gist Success!</b>"),n=encodeURIComponent(TextObfuscator.encode(Crypto.encode(t),3)),document.getElementById("result-link-gen").value=i+"view/?content="+n+c,document.getElementById("result-embed-genlight").value='<iframe src="'+i+"embed/light.html?content="+n+c+'" width="100%" height="600px" frameborder="0" scrolling="yes" allowfullscreen="true"></iframe>',document.getElementById("result-embed-gendark").value='<iframe src="'+i+"embed/?content="+n+c+'" width="100%" height="600px" frameborder="0" scrolling="yes" allowfullscreen="true"></iframe>',document.getElementById("result-form-gen").style.display="block")}))})):(a("content-images")||(l.images=document.getElementById("content-images").value.trim().split(/\n/),l.images=[].concat(d(l.images))),t=JSON.stringify(l,null,2),(o={})[n=Crypto.encode(document.getElementById("content-title").value)+".json"]={content:t},createGist(n,{description:document.getElementById("content-title").value,files:o},function(e,t){var n;e?m("msg","msg-error","<b>Failed Upload to Gist!</b><br>Error: "+e):(m("msg","msg","<b>Upload to Gist Success!</b>"),n=encodeURIComponent(TextObfuscator.encode(Crypto.encode(t),3)),document.getElementById("result-link-gen").value=i+"view/?content="+n+c,document.getElementById("result-embed-genlight").value='<iframe src="'+i+"embed/light.html?content="+n+c+'" width="100%" height="600px" frameborder="0" scrolling="yes" allowfullscreen="true"></iframe>',document.getElementById("result-embed-gendark").value='<iframe src="'+i+"embed/?content="+n+c+'" width="100%" height="600px" frameborder="0" scrolling="yes" allowfullscreen="true"></iframe>',document.getElementById("result-form-gen").style.display="block")}))):m("msg","msg-error","<b>Failed Upload to Gist!</b><br>Some fields are required!")}),document.getElementById("generate-source").addEventListener("click",function(){var n,e;document.getElementById("result-form-source").style.display="none",document.getElementById("result-form-gen").style.display="none",r.validate().isValid()?(n={},a("content-cover")||(n.cover=document.getElementById("content-cover").value.trim()),a("content-title")||(n.title=document.getElementById("content-title").value.trim()),a("content-origin-title")||(n.original=document.getElementById("content-origin-title").value.trim()),a("content-genre")||(n.genre=document.getElementById("content-genre").value.trim()),a("content-author")||(n.author=document.getElementById("content-author").value.trim()),a("content-chapter")||(n.chapter=document.getElementById("content-chapter").value.trim()),a("content-release")||(n.release_date=document.getElementById("content-release").value.trim()),a("content-isbn")||(n.isbn=document.getElementById("content-isbn").value.trim()),a("content-publisher")||(n.publisher=document.getElementById("content-publisher").value.trim()),a("content-translator")||(n.translator=document.getElementById("content-translator").value.trim()),a("content-language")||(n.language=document.getElementById("content-language").value.trim()),a("content-status")||(n.status=document.getElementById("content-status").value.trim()),a("content-per-page")||(n.item_per_page=document.getElementById("content-per-page").value.trim()),a("content-backlink")||(n.backlink=document.getElementById("content-backlink").value.trim()),a("content-download")||(n.download=document.getElementById("content-download").value.trim()),a("content-description")||(n.description=document.getElementById("content-description").value.trim()),document.getElementById("content-comment").checked&&(n.use_comment=!1),document.getElementById("content-cdnify").checked?a("content-images")||(e=n.cover,n.images=document.getElementById("content-images").value.trim().split(/\n/),n.images.push(e),n.images=[].concat(d(n.images)),m("msg","msg","<b>Processing images...</b>"),cdnify(n.images,function(e,t){e?(console.log(e),m("msg","msg","<b>Failed to CDNify but Generate still Success!</b><br>Upload this json source into your webserver."),n.images.splice(n.images.length-1,1)):(n.cover=t[t.length-1],t.splice(t.length-1,1),n.images=[].concat(t),m("msg","msg","<b>Generate Success!</b><br>Upload this json source into your webserver.")),document.getElementById("result-source").value=JSON.stringify(n,null,2),document.getElementById("result-form-source").style.display="block",document.getElementById("result-source").select()})):(a("content-images")||(n.images=document.getElementById("content-images").value.trim().split(/\n/),n.images=[].concat(d(n.images))),m("msg","msg","<b>Generate Success!</b><br>Upload this json source into your webserver."),document.getElementById("result-source").value=JSON.stringify(n,null,2),document.getElementById("result-form-source").style.display="block",document.getElementById("result-source").select())):m("msg","msg-error","<b>Failed to Generate!</b><br>Some fields are required!")}),document.getElementById("generate-source-reset").addEventListener("click",function(){e("form-source")}),document.getElementById("content-cover").addEventListener("blur",function(){r.element("content-cover").validate()}),document.getElementById("content-title").addEventListener("blur",function(){r.element("content-title").validate()}),document.getElementById("content-chapter").addEventListener("blur",function(){r.element("content-chapter").validate()}),document.getElementById("content-per-page").addEventListener("blur",function(){r.element("content-per-page").validate()}),document.getElementById("content-backlink").addEventListener("blur",function(){r.element("content-backlink").validate()}),document.getElementById("content-download").addEventListener("blur",function(){r.element("content-download").validate()}),document.getElementById("content-images").addEventListener("blur",function(){r.element("content-images").validate()}),document.getElementById("generate-link").addEventListener("click",function(){var e,t,n;o.validate().isValid()?(e=encodeURIComponent(TextObfuscator.encode(Crypto.encode(document.getElementById("content-link").value),3)),document.getElementById("result-link").value=i+"view/?content="+e,n=t="",document.getElementById("embed-light").checked&&(t="light.html"),document.getElementById("mode-single").checked&&(n="&style=single"),document.getElementById("result-embed").value='<iframe src="'+i+"embed/"+t+"?content="+e+n+'" width="100%" height="600px" frameborder="0" scrolling="yes" allowfullscreen="true"></iframe>',m("msg-link","msg","<b>Generate Success!</b><br>Your content is ready."),document.getElementById("result-form-link").style.display="block",document.getElementById("result-link").select()):(document.getElementById("result-form-link").style.display="none",m("msg-link","msg-error","<b>Failed to Generate!</b><br>Some fields are required!"))}),document.getElementById("generate-link-reset").addEventListener("click",function(){e("form-link")}),document.getElementById("content-link").addEventListener("blur",function(){o.element("content-link").validate()}),document.getElementById("btnMore").addEventListener("click",function(){var e=document.getElementById("more-info");"none"===e.style.display?e.style.display="inline":e.style.display="none"}),document.getElementById("copyrightyear").innerHTML=(new Date).getFullYear(),document.getElementById("website").innerHTML=i}();