!function(){var r=window.location.href.split("?")[0],e=new FormValidation,o=new FormValidation;function l(e,t,n){var r=document.createElement("div");r.setAttribute("class",t),r.innerHTML=n;var o=document.getElementById(e);o.childNodes[0]&&o.removeChild(o.childNodes[0]),o.style.display="block",o.appendChild(r)}function t(e){return!(0<document.getElementById(e).value.trim().length)}function n(e){if(document.getElementById(e).reset(),"form-source"===e){document.getElementById("result-form-source").style.display="none",document.getElementById("msg").style.display="none";var t=document.querySelectorAll(".validate-error"),n=t.length;if("none"===document.getElementById("error-content-link").style.display)for(var r=0;r<n;r++)t[r].classList.remove("validate-error");else for(r=0;r<n-1;r++)t[r].classList.remove("validate-error")}"form-link"===e&&(document.getElementById("result-form-link").style.display="none",document.getElementById("msg-link").style.display="none",document.getElementById("error-content-link").classList.remove("validate-error"))}e.rules({"content-cover":{required:!0,message:"Link for image cover is required!",regex:/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,4}\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)/,errorPlace:"error-content-cover",errorAddClass:{"error-content-cover":"validate-error"}},"content-title":{required:!0,message:"Title must be min 3-250 chars!",minLength:3,maxLength:250,errorPlace:"error-content-title",errorAddClass:{"error-content-title":"validate-error"}},"content-chapter":{required:!1,message:"Chapter must be a positive number!",regex:/^[0-9]/,errorPlace:"error-content-chapter",errorAddClass:{"error-content-chapter":"validate-error"}},"content-per-page":{required:!1,message:"Item per page must be a positive number!",regex:/^[0-9]/,errorPlace:"error-content-per-page",errorAddClass:{"error-content-per-page":"validate-error"}},"content-backlink":{required:!1,message:"Wrong format link!",regex:/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,4}\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)/,errorPlace:"error-content-backlink",errorAddClass:{"error-content-backlink":"validate-error"}},"content-download":{required:!1,message:"Wrong format link!",regex:/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,4}\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)/,errorPlace:"error-content-download",errorAddClass:{"error-content-download":"validate-error"}},"content-images":{required:!0,message:"Images data is required!",errorPlace:"error-content-images",errorAddClass:{"error-content-images":"validate-error","content-images":"line-number-danger"}}}),o.rules({"content-link":{required:!0,message:"Link of your json source is required!",regex:/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,4}\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)/,errorPlace:"error-content-link",errorAddClass:{"error-content-link":"validate-error"}}}),document.getElementById("generate-source").addEventListener("click",function(){var n;e.validate().isValid()?(n={},t("content-cover")||(n.cover=document.getElementById("content-cover").value.trim()),t("content-title")||(n.title=document.getElementById("content-title").value.trim()),t("content-origin-title")||(n.original=document.getElementById("content-origin-title").value.trim()),t("content-genre")||(n.genre=document.getElementById("content-genre").value.trim()),t("content-author")||(n.author=document.getElementById("content-author").value.trim()),t("content-chapter")||(n.chapter=document.getElementById("content-chapter").value.trim()),t("content-release")||(n.release_date=document.getElementById("content-release").value.trim()),t("content-isbn")||(n.isbn=document.getElementById("content-isbn").value.trim()),t("content-publisher")||(n.publisher=document.getElementById("content-publisher").value.trim()),t("content-translator")||(n.translator=document.getElementById("content-translator").value.trim()),t("content-language")||(n.language=document.getElementById("content-language").value.trim()),t("content-status")||(n.status=document.getElementById("content-status").value.trim()),t("content-per-page")||(n.item_per_page=document.getElementById("content-per-page").value.trim()),t("content-backlink")||(n.backlink=document.getElementById("content-backlink").value.trim()),t("content-download")||(n.download=document.getElementById("content-download").value.trim()),t("content-description")||(n.description=document.getElementById("content-description").value.trim()),document.getElementById("content-comment").checked&&(n.use_comment=!1),document.getElementById("content-cdnify").checked?t("content-images")||(n.images=document.getElementById("content-images").value.trim().split(/\n/),document.getElementById("result-form-source").style.display="none",l("msg","msg","<b>Processing images...</b>"),cdnify(n.images,function(e,t){e?(console.log(e),l("msg","msg","<b>Failed to CDNify but Generate still Success!</b><br>Upload this json source into your webserver.")):(n.images=[].concat(t),l("msg","msg","<b>Generate Success!</b><br>Upload this json source into your webserver.")),document.getElementById("result-source").value=JSON.stringify(n,null,2),document.getElementById("result-form-source").style.display="block",document.getElementById("result-source").select()})):(t("content-images")||(n.images=document.getElementById("content-images").value.trim().split(/\n/)),l("msg","msg","<b>Generate Success!</b><br>Upload this json source into your webserver."),document.getElementById("result-source").value=JSON.stringify(n,null,2),document.getElementById("result-form-source").style.display="block",document.getElementById("result-source").select())):(document.getElementById("result-form-source").style.display="none",l("msg","msg-error","<b>Failed to Generate!</b><br>Some fields are required!"))}),document.getElementById("generate-source-reset").addEventListener("click",function(){n("form-source")}),document.getElementById("content-cover").addEventListener("blur",function(){e.element("content-cover").validate()}),document.getElementById("content-title").addEventListener("blur",function(){e.element("content-title").validate()}),document.getElementById("content-chapter").addEventListener("blur",function(){e.element("content-chapter").validate()}),document.getElementById("content-per-page").addEventListener("blur",function(){e.element("content-per-page").validate()}),document.getElementById("content-backlink").addEventListener("blur",function(){e.element("content-backlink").validate()}),document.getElementById("content-download").addEventListener("blur",function(){e.element("content-download").validate()}),document.getElementById("content-images").addEventListener("blur",function(){e.element("content-images").validate()}),document.getElementById("generate-link").addEventListener("click",function(){var e,t,n;o.validate().isValid()?(e=encodeURIComponent(TextObfuscator.encode(Crypto.encode(document.getElementById("content-link").value),3)),document.getElementById("result-link").value=r+"view/?content="+e,n=t="",document.getElementById("embed-light").checked&&(t="&theme=light"),document.getElementById("mode-single").checked&&(n="&style=single"),document.getElementById("result-embed").value='<iframe src="'+r+"embed/?content="+e+n+t+'" width="100%" height="600px" frameborder="0" scrolling="yes" allowfullscreen="true"></iframe>',l("msg-link","msg","<b>Generate Success!</b><br>Your content is ready."),document.getElementById("result-form-link").style.display="block",document.getElementById("result-link").select()):(document.getElementById("result-form-link").style.display="none",l("msg-link","msg-error","<b>Failed to Generate!</b><br>Some fields are required!"))}),document.getElementById("generate-link-reset").addEventListener("click",function(){n("form-link")}),document.getElementById("content-link").addEventListener("blur",function(){o.element("content-link").validate()}),document.getElementById("btnMore").addEventListener("click",function(){var e=document.getElementById("more-info");"none"===e.style.display?e.style.display="inline":e.style.display="none"}),document.getElementById("copyrightyear").innerHTML=(new Date).getFullYear(),document.getElementById("website").innerHTML=r}();